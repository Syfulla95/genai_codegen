version: 2

sources:
  - name: jaffle_shop_classic
    description: Source tables for the jaffle-shop-classic DBT project
    database: GENAI_POWER_BI
    schema: PUBLIC
    tables:
      - name: raw_customers
        description: Raw customer data
        columns:
          - name: id
            description: Unique customer identifier
            tests:
              - not_null
              - unique
          - name: first_name
            description: Customer's first name
          - name: last_name
            description: Customer's last name
          - name: first_order
            description: Date of the first order placed
          - name: most_recent_order
            description: Date of the most recent order
          - name: number_of_orders
            description: Total number of orders placed by the customer
          - name: customer_lifetime_value
            description: Sum of all payments made by the customer

      - name: raw_orders
        description: Raw order data
        columns:
          - name: id
            description: Unique identifier for each order
            tests:
              - not_null
              - unique
          - name: customer_id
            description: Associated customer identifier
          - name: order_date
            description: Date when the order was placed
          - name: status
            description: Current status of the order
          - name: credit_card_amount
            description: Total amount paid using credit card
          - name: coupon_amount
            description: Total amount paid using coupons
          - name: bank_transfer_amount
            description: Total amount paid using bank transfer
          - name: gift_card_amount
            description: Total amount paid using gift card
          - name: amount
            description: Total payment received for the order

      - name: raw_payments
        description: Raw payment data
        columns:
          - name: order_id
            description: Identifier for the order associated with the payment
            tests:
              - relationships:
                  to: ref('raw_orders')
                  field: id
          - name: payment_method
            description: Method used for payment
          - name: amount
            description: Amount paid using the specified payment method